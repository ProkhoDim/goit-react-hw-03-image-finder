(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{21:function(e,t,a){e.exports=a(65)},26:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),i=(a(26),a(10)),s=a(7),l=a(3),u=a(4),m=a(6),g=a(5),h=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={message:""},e.handleChange=function(t){var a=t.currentTarget.value;return e.setState({message:a})},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.message)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.message;return r.a.createElement("header",{className:"Searchbar"},r.a.createElement("form",{className:"SearchForm",onSubmit:this.handleSubmit},r.a.createElement("button",{type:"submit",className:"SearchForm-button"},r.a.createElement("span",{className:"SearchForm-button-label"},"Search")),r.a.createElement("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,value:e,onChange:this.handleChange,placeholder:"Search images and photos"})))}}]),a}(n.Component),d=function(e){var t=e.id,a=e.webformatURL,n=e.tags,o=e.onClick;return r.a.createElement("li",{className:"ImageGalleryItem"},r.a.createElement("img",{src:a,alt:n,className:"ImageGalleryItem-image",onClick:function(){return o(t)}}))},f=function(e){var t=e.imageList,a=e.onImageClick;return r.a.createElement("ul",{className:"ImageGallery"},t.map((function(e){var t=e.id,n=e.webformatURL,o=e.tags;return r.a.createElement(d,{key:t,webformatURL:n,tags:o,id:t,onClick:a})})))},p=a(9),b=a.n(p);b.a.defaults.baseURL="https://pixabay.com/api/";var v=function(e){var t=e.page,a=void 0===t?1:t,n=e.perPage,r=void 0===n?20:n,o=e.queryString,c=void 0===o?"":o;return b.a.get("?key=".concat("15440827-454030fbfe14a611a1b7b063f","&q=").concat(c,"&page=").concat(a,"&per_page=").concat(r)).then((function(e){return e.data.hits})).then((function(e){return e.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}}))}))},y=function(e){var t=e.onCLick;return r.a.createElement("div",{className:"Button__wrap"},r.a.createElement("button",{type:"button",onClick:t,className:"Button"},"Load more..."))},L=a(20),E=a.n(L),S=document.querySelector("#modal"),C=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).closeModal=function(t){"Escape"!==t.code||e.props.onClose()},e.onClickOverlay=function(t){"Overlay"===t.target.className&&e.props.onClose()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.closeModal)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.closeModal)}},{key:"render",value:function(){return Object(o.createPortal)(r.a.createElement("div",{className:"Overlay",onClick:this.onClickOverlay},r.a.createElement("div",{className:"Modal"},this.props.children)),S)}}]),a}(n.Component),O=function(e){var t=e.options,a=t.largeImageURL,n=t.tags;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:a,alt:n}))},k={queryPage:1,imageList:[]},w=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state=Object(s.a)(Object(s.a)({},k),{},{searchMessage:"",isLoading:!1,showModal:!1,modalImageOptions:{},errorMessage:""}),e.getImages=function(){var t=e.state,a=t.searchMessage,n=t.queryPage;return e.setState({isLoading:!0,errorMessage:""}),v({queryString:a,page:n}).then((function(t){t.length>0?e.setState((function(e){return{imageList:[].concat(Object(i.a)(e.imageList),Object(i.a)(t)),queryPage:e.queryPage+1}})):e.setState({errorMessage:"Nothing's found. Change query and try again. Query: ".concat(a),isLoading:!1})})).catch((function(e){console.log(e)})).finally((function(){return e.setState({isLoading:!1})}))},e.handleSearchSubmit=function(t){e.setState(Object(s.a)({searchMessage:t},k))},e.handleLoadMoreClick=function(){e.getImages().then((function(){window.scrollBy({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e.getLargeImage=function(t){e.setState((function(e){return{modalImageOptions:Object(s.a)({},e.imageList.find((function(e){return e.id===t})))}})),e.toggleModal()},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.searchMessage!==this.state.searchMessage&&this.getImages()}},{key:"render",value:function(){var e=this.state,t=e.imageList,a=e.isLoading,n=e.showModal,o=e.errorMessage,c=e.modalImageOptions;return r.a.createElement("div",{className:"App"},n&&r.a.createElement(C,{onClose:this.toggleModal},r.a.createElement(O,{options:c})),r.a.createElement(h,{onSubmit:this.handleSearchSubmit}),r.a.createElement(f,{imageList:t,onImageClick:this.getLargeImage}),!a&&o&&r.a.createElement("h2",null,"Nothing's found. Change query and try again"),t.length>0&&!a&&r.a.createElement(y,{onCLick:this.handleLoadMoreClick}),a&&r.a.createElement(E.a,{type:"Circles",color:"#3f51b5",height:80,width:80,className:"Loader"}))}}]),a}(n.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.90ab2af1.chunk.js.map